(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{846:function(e,r,t){"use strict";t.r(r);var o=t(576),n=t(557),c=t(552),f=t(696),l=t(599),d=t(1),m=(t(190),t(10),t(39),t(41),t(7)),w=(t(111),t(42)),v={layout:"auth",data:function(){return{response:!1,form:{},rules:[function(e){return!!e||"ต้องจำเป็นต้องกรอกฟิลด์นี้"}],lists:[],step:0,formForgot:{password:"",confirm_password:""}}},created:function(){return Object(d.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{handleForm:function(){var e=this;return Object(d.a)(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!e.$refs.find.validate()){r.next=14;break}return r.next=4,m.a.getHttp("/api/auth/v2/changepassword/?fitness_id=".concat(e.form.fitness_id,"&username=").concat(e.form.username));case 4:if(!(t=r.sent).user_id){r.next=12;break}return r.next=8,w.a.alert("พบข้อมูลผู้ใช้","success","กรุณากรอกรหัสผ่านใหม่ และยืนยันรหัสผ่าน");case 8:e.step=1,e.formForgot.user_id=t.user_id,r.next=14;break;case 12:return r.next=14,w.a.alert("ไม่พบข้อมูลผู้ใช้","info","กรุณาตรวจสอบข้อมูลอีกครั้ง");case 14:case"end":return r.stop()}}),r)})))()},changePassword:function(){var e=this;return Object(d.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!e.$refs.forgot.validate()){r.next=14;break}return r.next=4,m.a.postHttp("/api/auth/v2/changepassword/",e.formForgot);case 4:if(!r.sent.id){r.next=12;break}return r.next=8,w.a.alert("เปลี่ยนรหัสผ่านสำเร็จ");case 8:return r.next=10,e.$router.push("/auth/login");case 10:r.next=14;break;case 12:return r.next=14,w.a.alert("กรุณาตรวจสอบข้อมูลอีกครั้ง","info","รหัสผ่านไม่ตรงกัน");case 14:case"end":return r.stop()}}),r)})))()}}},_=t(70),component=Object(_.a)(v,(function(){var e=this,r=e._self._c;return r("div",[r("div",{staticClass:"h-screen w-full py-16 px-4 bg"},[r(n.a,{staticClass:"w-full mt-2"},[r(c.d,{attrs:{"primary-title":""}},[e._v("\n                "+e._s(0==e.step?e.$l("ลืมรหัสผ่าน","Forgot Password"):e.$l("สร้างรหัสผ่านใหม่","New Password"))+"\n            ")]),e._v(" "),r(c.c,[0==e.step?r("div",[r(f.a,{ref:"find"},[r(l.a,{attrs:{rules:e.rules,label:e.$l("เบอร์โทรสำหรับเข้าสู่ระบบ","Phone Number for login"),outlined:"",dense:""},model:{value:e.form.username,callback:function(r){e.$set(e.form,"username",r)},expression:"form.username"}}),e._v(" "),r(l.a,{attrs:{label:e.$l("รหัสลูกค้า","Fitness No"),outlined:"",dense:""},model:{value:e.form.fitness_id,callback:function(r){e.$set(e.form,"fitness_id",r)},expression:"form.fitness_id"}}),e._v(" "),r(o.a,{attrs:{block:"",color:"success"},on:{click:function(r){return e.handleForm()}}},[e._v(e._s(e.$l("ส่งรหัสผ่านใหม่","Send New Password")))])],1)],1):1==e.step?r("div",[r(f.a,{ref:"forgot"},[r(l.a,{attrs:{type:"password",rules:e.rules,label:e.$l("รหัสผ่านใหม่","New password"),outlined:"",dense:""},model:{value:e.formForgot.password,callback:function(r){e.$set(e.formForgot,"password",r)},expression:"formForgot.password"}}),e._v(" "),r(l.a,{attrs:{type:"password",label:e.$l("ยืนยันรหัสผ่านใหม่","Confirm Password"),outlined:"",dense:""},model:{value:e.formForgot.confirm_password,callback:function(r){e.$set(e.formForgot,"confirm_password",r)},expression:"formForgot.confirm_password"}}),e._v(" "),""!=e.formForgot.password&&""!=e.formForgot.password&&e.formForgot.password==e.formForgot.confirm_password?r(o.a,{attrs:{block:"",color:"success"},on:{click:function(r){return e.changePassword()}}},[e._v(e._s(e.$l("สร้างรหัสผ่านใหม่","Update New Password")))]):e._e()],1)],1):e._e()])],1)],1)])}),[],!1,null,null,null);r.default=component.exports}}]);