(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{838:function(e,t,r){"use strict";r.r(t);var n=r(686),c=r(565),o=r(596),d=r(564),l=r(723),v=r(609),_=r(726),m=r(2),f=(r(65),r(215),r(45),r(37)),y=r(116),h=r(18),k=r(0),x=r.n(k),w={data:function(){return{user:y.a.user,mytier:{},datePer:0,response:!1,count:0}},mounted:function(){var e=this;return Object(m.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.run();case 2:case"end":return t.stop()}}),t)})))()},methods:{run:function(){var e=this;return Object(m.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.loadMyTier();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},loadMyTier:function(){var e=this;return Object(m.a)(regeneratorRuntime.mark((function t(){var r,n,c,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.getHttp("/api/payout/userpayout/?user=".concat(e.user.id));case 2:if(!((r=t.sent).length>0)){t.next=21;break}if(e.mytier=r[r.length-1],n=x()(),c=x()(e.mytier.end_date),o=c.diff(n,"days"),e.datePer=Number((o/e.mytier.days*100).toFixed(0)),console.log(o,e.datePer,e.mytier.days),e.count=o,!(o<3&&o>0)){t.next=16;break}return t.next=14,f.a.alert("สมาชิกใกล้หมดอายุแล้ว","info","คุณมีเวลาเหลืออีก ".concat(o," วัน กรุณาต่ออายุหลังจากหมดอายุแล้ว เพื่อให้สามารถใช้งานได้ต่อไป"));case 14:t.next=21;break;case 16:if(0!=o||1!=e.user.in_class){t.next=21;break}return t.next=19,f.a.alert("หมดอายุแล้ว","info","กรุณาต่ออายุหลังจากหมดอายุแล้ว เพื่อให้สามารถใช้งานได้ต่อไป");case 19:return t.next=21,y.a.switchUser(!1);case 21:case"end":return t.stop()}}),t)})))()}},computed:{endDate:function(){try{return x()(this.mytier.end_date).format("DD/MM/YYYY")}catch(e){return"-"}}}},C=r(81),component=Object(C.a)(w,(function(){var e=this,t=e._self._c;return t("div",[e.mytier.id||e.user.in_class?t("div",[0==e.mytier.status?t("div",[e.mytier.image_slip?t("div",[t("center",[t(d.a,{attrs:{size:"60",color:"green"}},[e._v("mdi-check-circle")]),e._v(" "),t("br"),e._v(" "),t("h2",{staticClass:"text-green-500 font-semibold text-xl"},[e._v("อัพโหลดหลักฐานการชำระเงิน เรียบร้อยแล้ว")]),e._v(" "),t("span",[t("p",[e._v("ขอบคุณที่ใช้บริการ กรุณารอการตรวจสอบข้อมูลการชำระเงิน 1-2 วันทำการ จากนั้นจะสามารถใช้งานได้ต่อไป")])]),e._v(" "),t(c.a,{staticClass:"mt-4",attrs:{depressed:"",color:"warning"},on:{click:function(t){return e.$router.push("/payout/checkout/?id=".concat(e.mytier.id))}}},[e._v("แก้ไขหลักฐานการชำระเงิน")])],1)],1):t("div",[t("center",[t(d.a,{attrs:{size:"60",color:"orange"}},[e._v("mdi-information")]),e._v(" "),t("br"),e._v(" "),t(c.a,{attrs:{depressed:"",color:"success"},on:{click:function(t){return e.$router.push("/payout/checkout/?id=".concat(e.mytier.id))}}},[e._v("อัพโหลดหลักฐานการชำระเงิน")])],1),e._v(" "),t("p",[e._v(" หากคุณชำระเงินแล้วรอแอดมินตรวจสอบข้อมูลการชำระเงิน 1-2 วันทำการ")])],1)]):1==e.mytier.status?t("div",[e.count<1?t(n.a,{attrs:{type:"error"}},[e._v("\n                หมดอายุแล้ว กรุณาต่ออายุหลังจากหมดอายุแล้ว เพื่อให้สามารถใช้งานได้ต่อไป\n            ")]):e._e(),e._v(" "),t(_.a,{staticClass:"mt-6",attrs:{rows:"3",readonly:"",dense:"",value:"เป็นสมาชิก ".concat(e.mytier.tier_name),label:"สถานะสมาชิก",id:"id"}}),e._v(" "),t(v.a,{staticClass:"mt-6",attrs:{disabled:"",dense:"",value:e.user.number_class,label:"จำนวน Class ที่จองได้",id:"id"}}),e._v(" "),t(l.a,{attrs:{value:e.datePer,height:"15",striped:"",color:e.datePer>=50?"green":e.datePer>=40?"orange":"red"}}),e._v(" (เหลือ "+e._s(e.count)+" วัน)\n            "),t(v.a,{staticClass:"mt-6",attrs:{disabled:"",dense:"",value:e.endDate,label:"วันหมดอายุสมาชิก",id:"id"}})],1):t("div",[t("h2",{staticClass:"font-semibold"},[e._v("ไม่ได้เป็นสมาชิก หรือ สถานะสมาชิกของคุณอาจหมดอายุแล้ว")]),e._v(" "),t("p",[e._v(e._s(e.mytier.ect))]),e._v(" "),t(c.a,{attrs:{block:"",color:"success"},on:{click:function(t){return e.$router.push("/payout/")}}},[e._v("สมัครเป็นสมาชิก/ต่ออายุสมาชิก")])],1),e._v(" "),1==e.mytier.status?t("div",[t(o.a),e._v(" "),t("br"),e._v(" "),e.count<1?t(c.a,{attrs:{block:"",color:"success"},on:{click:function(t){return e.$router.push("/payout/")}}},[e._v("ต่ออายุสมาชิก")]):e._e()],1):e._e()]):t("div",[t("h2",[e._v("เพื่อใช้งานส่วนต่างๆ ของระบบ คุณค้องเป็นสมาชิกกับ Fitness ก่อน")]),e._v(" "),t(c.a,{attrs:{block:"",color:"success"},on:{click:function(t){return e.$router.push("/payout/")}}},[e._v("สมัครเป็นสมาชิกกับ Fitness")])],1)])}),[],!1,null,null,null);t.default=component.exports}}]);